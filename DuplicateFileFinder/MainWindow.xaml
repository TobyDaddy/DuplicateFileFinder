<Window x:Class="DuplicateFileFinderWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        xmlns:local="clr-namespace:DuplicateFileFinderWPF"
        Title="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=AppTitle}" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen"
        FontFamily="Microsoft YaHei UI, Segoe UI, PingFang SC, Hiragino Sans GB, sans-serif"
        ui:WindowHelper.UseModernWindowStyle="False"
        Loaded="MainWindow_Loaded"
    >

    <!-- å›¾æ ‡åœ¨ MainWindow_Loaded äº‹ä»¶ä¸­é€šè¿‡ C# ä»£ç è®¾ç½® -->

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="44" 
                      ResizeBorderThickness="5" 
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!-- ä¸“ä¸šé…è‰²æ–¹æ¡ˆå®šä¹‰ -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="#2C5AA0"/>
        <SolidColorBrush x:Key="PrimaryLightBrush" Color="#4A7BC8"/>
        <SolidColorBrush x:Key="AccentBrush" Color="#4CAF50"/>
        <SolidColorBrush x:Key="AccentLightBrush" Color="#81C784"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="#FAFAFA"/>
        <SolidColorBrush x:Key="SurfaceDarkBrush" Color="#F5F5F5"/>
        <SolidColorBrush x:Key="BackgroundBrush" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#212121"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#757575"/>
        <SolidColorBrush x:Key="DividerBrush" Color="#E0E0E0"/>
        <SolidColorBrush x:Key="WarningBrush" Color="#FF9800"/>
        <SolidColorBrush x:Key="ErrorBrush" Color="#F44336"/>
        
        <!-- æ–‡ä»¶å¤¹å›¾æ ‡æŒ‰é’®æ ·å¼ -->
        <Style x:Key="FolderButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{StaticResource SurfaceDarkBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- æ ‡é¢˜æ æŒ‰é’®æ ·å¼ -->
        <Style x:Key="TitleBarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#15000000"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#25000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- çª—å£æŽ§åˆ¶æŒ‰é’®æ ·å¼ -->
        <Style x:Key="WindowButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#15000000"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#25000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- ä¸»è¦æŒ‰é’®æ ·å¼ -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#5A8FD3"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1E3F73"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CCCCCC"/>
                                <Setter Property="Foreground" Value="#999999"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- æ¬¡è¦æŒ‰é’®æ ·å¼ -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F0F0F0"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#E8E8E8"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#F5F5F5"/>
                                <Setter Property="Foreground" Value="#CCCCCC"/>
                                <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- è­¦å‘ŠæŒ‰é’®æ ·å¼ -->
        <Style x:Key="WarningButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource WarningBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FFB74D"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#F57C00"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CCCCCC"/>
                                <Setter Property="Foreground" Value="#999999"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- å±é™©æŒ‰é’®æ ·å¼ -->
        <Style x:Key="DangerButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#E57373"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#EF9A9A"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#C62828"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CCCCCC"/>
                                <Setter Property="Foreground" Value="#999999"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- è‡ªå®šä¹‰å¤é€‰æ¡†æ ·å¼ -->
        <Style x:Key="CustomCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- å¤é€‰æ¡†åŒºåŸŸ -->
                            <Border Grid.Column="0" Width="18" Height="18" 
                                    BorderBrush="{StaticResource DividerBrush}" 
                                    BorderThickness="2" CornerRadius="3" Margin="0,0,8,0"
                                    Background="{TemplateBinding Background}"
                                    Cursor="Hand">
                                <Path x:Name="CheckMark" 
                                      Data="M 1 1 L 7 7 M 7 1 L 1 7" 
                                      Stroke="White" StrokeThickness="2.5" 
                                      Visibility="Collapsed"
                                      HorizontalAlignment="Center" 
                                      VerticalAlignment="Center"/>
                            </Border>
                            
                            <!-- æ–‡æœ¬å†…å®¹åŒºåŸŸ - ä¸å“åº”é¼ æ ‡äº‹ä»¶ -->
                            <ContentPresenter Grid.Column="1" 
                                            HorizontalAlignment="Left" 
                                            VerticalAlignment="Center"
                                            IsHitTestVisible="False"/>
                        </Grid>
                        
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                <Setter Property="Background" Value="{StaticResource ErrorBrush}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="False">
                                <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- TreeViewæ ·å¼ -->
        <Style x:Key="ModernTreeViewStyle" TargetType="TreeView">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8"/>
        </Style>
        
        <!-- TreeViewItemæ ·å¼ -->
        <Style x:Key="ModernTreeViewItemStyle" TargetType="TreeViewItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TreeViewItem">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <Border Grid.Row="0" Background="{TemplateBinding Background}" 
                                    CornerRadius="4" Padding="{TemplateBinding Padding}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- å±•å¼€/æŠ˜å æŒ‰é’® -->
                                    <ToggleButton Grid.Column="0" x:Name="Expander" 
                                                  IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                                                  ClickMode="Press" Margin="0,0,8,0"
                                                  Width="16" Height="16" Background="Transparent" BorderThickness="0">
                                        <ToggleButton.Style>
                                            <Style TargetType="ToggleButton">
                                                <Setter Property="Content" Value="â–¶"/>
                                                <Setter Property="FontSize" Value="10"/>
                                                <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter Property="Content" Value="â–¼"/>
                                                    </Trigger>
                                                    <DataTrigger Binding="{Binding HasItems, RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                                                        <Setter Property="Visibility" Value="Hidden"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                    
                                    <!-- å†…å®¹ -->
                                    <ContentPresenter Grid.Column="1" x:Name="PART_Header" 
                                                      ContentSource="Header" 
                                                      HorizontalAlignment="Left" 
                                                      VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                            
                            <!-- å­é¡¹å®¹å™¨ -->
                            <ItemsPresenter Grid.Row="1" x:Name="ItemsHost" 
                                            Margin="3,0,0,0"/>
                        </Grid>
                        
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="false">
                                <Setter TargetName="ItemsHost" Property="Visibility" Value="Collapsed"/>
                            </Trigger>
                            <Trigger Property="HasItems" Value="false">
                                <Setter TargetName="Expander" Property="Visibility" Value="Hidden"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="Background" Value="#E3F2FD"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Background" Value="#F5F5F5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Slideræ ·å¼ -->
        <Style x:Key="SliderButtonStyle" TargetType="RepeatButton">
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border Background="{TemplateBinding Background}" Height="4" CornerRadius="2"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="SliderThumbStyle" TargetType="Thumb">
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="Height" Value="12"/>
            <Setter Property="Width" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Ellipse Fill="White" Stroke="#80FFFFFF" StrokeThickness="1"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="44"/>  <!-- æ ‡é¢˜æ  -->
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- è®¾ç½®æ•´ä½“èƒŒæ™¯ -->
        <Grid.Background>
            <StaticResource ResourceKey="SurfaceBrush"/>
        </Grid.Background>

        <!-- çœŸæ­£çš„æ ‡é¢˜æ  -->
        <Grid Grid.Row="0" Background="{StaticResource BackgroundBrush}">
            <Grid.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="1" Opacity="0.1" BlurRadius="3"/>
            </Grid.Effect>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>   <!-- å›¾æ ‡ -->
                <ColumnDefinition Width="*"/>      <!-- æ ‡é¢˜ -->
                <ColumnDefinition Width="Auto"/>   <!-- è‡ªå®šä¹‰æŒ‰é’® -->
                <ColumnDefinition Width="Auto"/>   <!-- çª—å£æŽ§åˆ¶æŒ‰é’® -->
            </Grid.ColumnDefinitions>
            
            <!-- åº”ç”¨å›¾æ ‡ï¼šæ”¹ä¸ºç»‘å®šçª—å£Icon -->
            <Image Grid.Column="0" Width="18" Height="18" Margin="12,0,8,0"
                   VerticalAlignment="Center"
                   Source="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Icon}"
                   RenderOptions.BitmapScalingMode="Fant"/>
            
            <!-- åº”ç”¨æ ‡é¢˜ -->
            <TextBlock Grid.Column="1" Text="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=AppTitle}" 
                       VerticalAlignment="Center" FontWeight="SemiBold" FontSize="14"
                       Foreground="{StaticResource TextPrimaryBrush}"/>
            
            <!-- è‡ªå®šä¹‰æŒ‰é’® -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button x:Name="SettingsButton" Content="âš™ï¸" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Settings}"
                        Style="{StaticResource TitleBarButtonStyle}"
                        Click="SettingsButton_Click"/>
                <Button x:Name="LanguageButton" Content="ðŸŒ" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Language}"
                        Style="{StaticResource TitleBarButtonStyle}"
                        Click="LanguageButton_Click">
                    <Button.ContextMenu>
                        <ContextMenu x:Name="LanguageContextMenu">
                            <MenuItem x:Name="ChineseMenuItem" Header="ä¸­æ–‡ âœ“" Click="ChineseMenuItem_Click"/>
                            <MenuItem x:Name="EnglishMenuItem" Header="English" Click="EnglishMenuItem_Click"/>
                        </ContextMenu>
                    </Button.ContextMenu>
                </Button>
                <Button x:Name="HelpButton" Content="â“" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Help}"
                        Style="{StaticResource TitleBarButtonStyle}"
                        Click="HelpButton_Click"/>
            </StackPanel>
            
            <!-- çª—å£æŽ§åˆ¶æŒ‰é’® -->
            <StackPanel Grid.Column="3" Orientation="Horizontal">
                <Button x:Name="MinimizeButton" Content="&#xE921;" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Minimize}"
                        Style="{StaticResource WindowButtonStyle}"
                        Click="MinimizeButton_Click"/>
                <Button x:Name="MaximizeButton" Content="&#xE922;" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Maximize}"
                        Style="{StaticResource WindowButtonStyle}"
                        Click="MaximizeButton_Click"/>
                <Button x:Name="CloseButton" Content="&#xE8BB;" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Close}"
                        Click="CloseButton_Click">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource WindowButtonStyle}">
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#E81123"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Grid>

        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <Border Grid.Row="1" Background="{StaticResource BackgroundBrush}" 
                BorderBrush="{StaticResource DividerBrush}" 
                BorderThickness="0,0,0,1" Padding="24,20">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="1" Opacity="0.05" BlurRadius="2"/>
            </Border.Effect>
            <StackPanel Orientation="Horizontal">
                <Label Content="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=SelectFolder}" 
                       VerticalAlignment="Center" FontWeight="SemiBold" 
                       Margin="0,0,12,0" Foreground="{StaticResource TextPrimaryBrush}"/>
                <TextBox x:Name="FolderPathTextBox" Width="400" Height="36"
                         Text=""
                         VerticalAlignment="Center" Margin="0,0,12,0"
                         Padding="12,8" FontSize="13"
                         BorderBrush="{StaticResource DividerBrush}" BorderThickness="1"
                         KeyDown="FolderPathTextBox_KeyDown"/>
                <Button x:Name="BrowseButton" Content="ðŸ“" Click="BrowseButton_Click" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Browse}" 
                        ToolTipService.ShowOnDisabled="True"
                        Style="{StaticResource SecondaryButtonStyle}" 
                        Width="42" Height="36" FontSize="14" Padding="0"
                        HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                        Margin="0,0,12,0"/>
                <Button x:Name="ScanButton" Content="âš¡" Click="ScanButton_Click" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=StartSearch}" 
                        ToolTipService.ShowOnDisabled="True"
                        Style="{StaticResource PrimaryButtonStyle}" 
                        Width="42" Height="36" FontSize="14" Padding="0"
                        HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                        Margin="0,0,12,0"/>
                <Button x:Name="DeleteMarkedButton" Content="âŒ" Click="DeleteMarkedButton_Click" 
                        ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=DeleteMarkedFiles}" 
                        ToolTipService.ShowOnDisabled="True"
                        Style="{StaticResource DangerButtonStyle}" 
                        Width="42" Height="36" FontSize="14" Padding="0"
                        HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                        Margin="0,0,0,0" IsEnabled="False"/>
            </StackPanel>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid Grid.Row="2" Margin="24" x:Name="MainContentGrid" SizeChanged="MainContentGrid_SizeChanged">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" x:Name="FileListColumn" MinWidth="260"/>
                <!-- å¯åŠ¨é»˜è®¤æŠ˜å å³ä¾§é¢„è§ˆåŒºä¸Žåˆ†éš”æ¡ï¼Œé¿å…ä¸­é—´åˆ—è¡¨æœªé“ºæ»¡çš„é—®é¢˜ -->
                <ColumnDefinition Width="0" x:Name="SplitterColumn"/>
                <ColumnDefinition Width="0" x:Name="PreviewColumn" MinWidth="0"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦ä¾§æ–‡ä»¶æ ‘ -->
            <Border Grid.Column="0" Grid.ColumnSpan="3" x:Name="FileListBorder" Background="{StaticResource BackgroundBrush}"
                    BorderBrush="{StaticResource DividerBrush}"
                    BorderThickness="1" CornerRadius="8" Padding="20">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.08" BlurRadius="8"/>
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Grid.Row="0" Text="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=FileList}" FontWeight="SemiBold" 
                               FontSize="16" Margin="0,0,0,16"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TreeView x:Name="FileTreeView" Grid.Row="1" 
                              SelectedItemChanged="FileTreeView_SelectedItemChanged"
                              Style="{StaticResource ModernTreeViewStyle}"
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                              ScrollViewer.CanContentScroll="False">
                        <TreeView.ItemContainerStyle>
                            <StaticResource ResourceKey="ModernTreeViewItemStyle"/>
                        </TreeView.ItemContainerStyle>
                    </TreeView>
                </Grid>
            </Border>

            <!-- åˆ†éš”ç¬¦ -->
            <GridSplitter Grid.Column="1" x:Name="MainSplitter" HorizontalAlignment="Stretch" Visibility="Collapsed"
                          Background="{StaticResource DividerBrush}" Margin="2,0"
                          ShowsPreview="True" Width="8" ResizeBehavior="PreviousAndNext"/>

        <!-- å³ä¾§é¢„è§ˆåŒºåŸŸï¼ˆå¯åŠ¨é»˜è®¤éšè—ï¼ŒæŒ‰éœ€å±•å¼€ï¼‰ -->
        <Border Grid.Column="2" x:Name="PreviewBorder" Background="{StaticResource BackgroundBrush}"
                    BorderBrush="{StaticResource DividerBrush}"
            BorderThickness="1" CornerRadius="8" Padding="20" Visibility="Collapsed">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.08" BlurRadius="8"/>
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- é¢„è§ˆæ ‡é¢˜åŒºåŸŸ -->
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=FilePreviewTitle}" FontWeight="SemiBold" 
                                   FontSize="16" Margin="0,0,0,16"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextPrimaryBrush}"/>
                        
                        <!-- æ—‹è½¬æŒ‰é’® - åªæœ‰å›¾ç‰‡æ˜¾ç¤ºæ—¶å¯è§ -->
                        <Button Grid.Column="1" x:Name="RotateButton" 
                                Width="32" Height="32" Margin="0,0,0,0"
                                VerticalAlignment="Top"
                                HorizontalAlignment="Right"
                                Visibility="Collapsed"
                                ToolTip="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=RotateRight}"
                                ToolTipService.ShowOnDisabled="True"
                                Click="RotateButton_Click"
                                Style="{StaticResource TitleBarButtonStyle}"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="16"
                                Content="&#xE7AD;"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center">
                        </Button>
                    </Grid>
                    
                    <!-- é¢„è§ˆåŒºåŸŸ -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="5*"/>
                            <RowDefinition Height="4"/>
                            <RowDefinition Height="3*"/>
                        </Grid.RowDefinitions>
                        
                        <!-- ä¸Šéƒ¨åˆ†ï¼šæ–‡ä»¶é¢„è§ˆ -->
                        <Grid Grid.Row="0" x:Name="PreviewGrid">
                            <!-- å›¾ç‰‡é¢„è§ˆå®¹å™¨ -->
                            <Border x:Name="ImagePreviewBorder" ClipToBounds="True" 
                                    Background="Transparent" CornerRadius="4">
                                <Image x:Name="PreviewImage" Stretch="Uniform" 
                                       Visibility="Collapsed" HorizontalAlignment="Center" 
                                       VerticalAlignment="Center" Cursor="Hand"
                                       RenderTransformOrigin="0.5,0.5"/>
                            </Border>
                            
                            <!-- è§†é¢‘é¢„è§ˆ -->
                            <Grid x:Name="VideoPreviewGrid" Visibility="Collapsed" 
                                  Background="Black">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- è§†é¢‘æ’­æ”¾å™¨ -->
                                <MediaElement x:Name="VideoPlayer" Grid.Row="0"
                                             LoadedBehavior="Manual" UnloadedBehavior="Stop"
                                             Stretch="Uniform" 
                                             MediaOpened="VideoPlayer_MediaOpened"
                                             MediaEnded="VideoPlayer_MediaEnded"
                                             MediaFailed="VideoPlayer_MediaFailed"
                                             MouseLeftButtonDown="VideoPlayer_MouseLeftButtonDown"
                                             Cursor="Hand"/>
                                
                                <!-- è§†é¢‘æŽ§åˆ¶æ  -->
                                <Grid Grid.Row="1" Background="#80000000" Margin="0,0,0,10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- è¿›åº¦æ¡åŒºåŸŸ -->
                                    <Grid Grid.Row="0" Height="40" Margin="10,5,10,5">
                                        <!-- é€æ˜Žç‚¹å‡»åŒºåŸŸ -->
                                        <Border Background="Transparent" 
                                               PreviewMouseLeftButtonDown="VideoProgressArea_PreviewMouseLeftButtonDown"
                                               Cursor="Hand"/>
                                        
                                        <!-- å®žé™…è¿›åº¦æ¡ -->
                                        <Slider x:Name="VideoProgressSlider" 
                                               Minimum="0" Maximum="100" Value="0"
                                               Height="24" VerticalAlignment="Center"
                                               Thumb.DragStarted="VideoProgressSlider_DragStarted"
                                               Thumb.DragCompleted="VideoProgressSlider_DragCompleted"
                                               ValueChanged="VideoProgressSlider_ValueChanged"
                                               IsManipulationEnabled="True">
                                            <Slider.Style>
                                                <Style TargetType="Slider">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Slider">
                                                                <Grid>
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="Auto"/>
                                                                        <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}"/>
                                                                        <RowDefinition Height="Auto"/>
                                                                    </Grid.RowDefinitions>
                                                                    <Track Grid.Row="1" x:Name="PART_Track">
                                                                        <Track.DecreaseRepeatButton>
                                                                            <RepeatButton Style="{StaticResource SliderButtonStyle}" 
                                                                                        Background="#60FFFFFF"/>
                                                                        </Track.DecreaseRepeatButton>
                                                                        <Track.Thumb>
                                                                            <Thumb Style="{StaticResource SliderThumbStyle}"/>
                                                                        </Track.Thumb>
                                                                        <Track.IncreaseRepeatButton>
                                                                            <RepeatButton Style="{StaticResource SliderButtonStyle}" 
                                                                                        Background="#40606060"/>
                                                                        </Track.IncreaseRepeatButton>
                                                                    </Track>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Slider.Style>
                                        </Slider>
                                    </Grid>
                                    
                                    <!-- æŽ§åˆ¶æŒ‰é’® -->
                                    <StackPanel Grid.Row="1" Orientation="Horizontal" 
                                               HorizontalAlignment="Center" 
                                               Margin="5">
                                        <Button x:Name="PlayPauseButton" Content="â–¶ï¸" 
                                               Width="40" Height="30" Margin="5"
                                               Click="PlayPauseButton_Click"
                                               Background="#40FFFFFF" BorderThickness="1" BorderBrush="#80FFFFFF"
                                               Foreground="White" FontSize="14">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        CornerRadius="3">
                                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                                    VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Background" Value="#80FFFFFF"/>
                                                                        <Setter Property="BorderBrush" Value="White"/>
                                                                        <Setter Property="Foreground" Value="Black"/>
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed" Value="True">
                                                                        <Setter Property="Background" Value="#A0FFFFFF"/>
                                                                        <Setter Property="BorderBrush" Value="White"/>
                                                                        <Setter Property="Foreground" Value="Black"/>
                                                                        <Setter Property="RenderTransform">
                                                                            <Setter.Value>
                                                                                <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                        <Button x:Name="StopButton" Content="â¹ï¸" 
                                               Width="40" Height="30" Margin="5"
                                               Click="StopButton_Click"
                                               Background="#40FFFFFF" BorderThickness="1" BorderBrush="#80FFFFFF"
                                               Foreground="White" FontSize="14">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        CornerRadius="3">
                                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                                    VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Background" Value="#80FFFFFF"/>
                                                                        <Setter Property="BorderBrush" Value="White"/>
                                                                        <Setter Property="Foreground" Value="Black"/>
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed" Value="True">
                                                                        <Setter Property="Background" Value="#A0FFFFFF"/>
                                                                        <Setter Property="BorderBrush" Value="White"/>
                                                                        <Setter Property="Foreground" Value="Black"/>
                                                                        <Setter Property="RenderTransform">
                                                                            <Setter.Value>
                                                                                <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                        <TextBlock x:Name="VideoTimeText" Text="00:00 / 00:00" 
                                                  VerticalAlignment="Center" Foreground="White" 
                                                  Margin="10,0"/>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                            
                            <!-- æ— é¢„è§ˆ -->
                            <TextBlock x:Name="NoPreviewText" Text="é€‰æ‹©æ–‡ä»¶ä»¥é¢„è§ˆ" 
                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                       FontSize="16" Foreground="{StaticResource TextSecondaryBrush}"
                                       Visibility="Collapsed"/>
                        </Grid>
                        
                        <!-- åˆ†éš”çº¿ -->
                        <Border Grid.Row="1" Background="{StaticResource DividerBrush}" Margin="0,8"/>
                        
                        <!-- ä¸‹éƒ¨åˆ†ï¼šæ–‡ä»¶å±žæ€§ -->
                        <Grid Grid.Row="2" Margin="0,8,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Text="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=FileProperties}" FontWeight="SemiBold" 
                                       FontSize="14" Margin="0,0,0,8"
                                       Foreground="{StaticResource TextPrimaryBrush}"/>
                            
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" 
                                         HorizontalScrollBarVisibility="Disabled">
                                <Border>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- æ–‡ä»¶å±žæ€§åŒºåŸŸ -->
                                        <Grid x:Name="FilePropertiesGrid" Margin="16"
                                              DataContext="{Binding Source={x:Static local:LocalizationManager.Instance}}">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- åˆ›å»ºæ—¥æœŸ -->
                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding CreationDate, FallbackValue='Creation Date:'}" 
                                                       Margin="0,2,8,2" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="CreationDateText" 
                                                       Text="-" Margin="0,2" TextWrapping="Wrap"
                                                       Foreground="{StaticResource TextPrimaryBrush}"/>
                                            
                                            <!-- ä¿®æ”¹æ—¥æœŸ -->
                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding ModificationDate, FallbackValue='Modification Date:'}" 
                                                       Margin="0,2,8,2" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="ModificationDateText" 
                                                       Text="-" Margin="0,2" TextWrapping="Wrap"
                                                       Foreground="{StaticResource TextPrimaryBrush}"/>
                                            
                                            <!-- æ–‡ä»¶å¤§å° -->
                                            <TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding FileSize, FallbackValue='File Size:'}" 
                                                       Margin="0,2,8,2" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                                            <TextBlock Grid.Row="2" Grid.Column="1" x:Name="FileSizeText" 
                                                       Text="-" Margin="0,2" TextWrapping="Wrap"
                                                       Foreground="{StaticResource TextPrimaryBrush}"/>
                                            
                                            <!-- æ–‡ä»¶ä½ç½® -->
                                            <TextBlock Grid.Row="3" Grid.Column="0" Text="{Binding FileLocation, FallbackValue='File Location:'}" 
                                                       Margin="0,2,8,2" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                                            <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Margin="0,2">
                                                <Button x:Name="OpenLocationButton" 
                                                       Width="20" Height="20" Margin="0,0,8,0"
                                                       Click="OpenLocationButton_Click"
                                                       ToolTip="{Binding OpenLocationTooltip}"
                                                       Background="Transparent" BorderThickness="0"
                                                       Padding="2">
                                                    <Path Fill="{StaticResource AccentBrush}" 
                                                          Data="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"
                                                          Stretch="Uniform" Width="12" Height="12"/>
                                                </Button>
                                                <TextBlock x:Name="FileLocationText" 
                                                           Text="-" TextWrapping="Wrap" VerticalAlignment="Center"
                                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </ScrollViewer>
                        </Grid>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <Border Grid.Row="3" Background="{StaticResource BackgroundBrush}" 
                BorderBrush="{StaticResource DividerBrush}" 
                BorderThickness="0,1,0,0" Padding="24,12">
            <StackPanel Orientation="Horizontal">
                <TextBlock x:Name="StatusText" Text="{Binding Source={x:Static local:LocalizationManager.Instance}, Path=Ready}" VerticalAlignment="Center" 
                           Margin="0,0,20,0" Foreground="{StaticResource TextPrimaryBrush}"/>
                <ProgressBar x:Name="ScanProgressBar" Width="200" Height="4"
                           Visibility="Collapsed" VerticalAlignment="Center"
                           Background="{StaticResource SurfaceDarkBrush}"
                           Foreground="{StaticResource PrimaryBrush}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
